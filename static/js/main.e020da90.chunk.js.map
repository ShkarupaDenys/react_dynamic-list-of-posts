{"version":3,"sources":["types/Error.ts","types/Notif.ts","types/Loading.ts","components/Loader/Loader.tsx","context/PostDetailsContext.tsx","context/UserSelectorContext.tsx","components/UseSelector/DropdownItem.tsx","components/UseSelector/DropdownMenu.tsx","components/UseSelector/DropdownTrigger.tsx","utils/fetchClient.ts","api/posts.ts","components/UseSelector/UserSelector.tsx","api/users.ts","components/Notification/Notification.tsx","components/PostsList/components/PostItem/PostItem.tsx","components/PostsList/PostsList.tsx","components/PostDetails/components/Message/Message.tsx","components/PostDetails/components/Comments/Comments.tsx","components/NewCommentForm/components/FieldError/FieldError.tsx","components/NewCommentForm/components/InputField/components/InputFieldIcon/InputFieldIcon.tsx","components/NewCommentForm/components/InputField/InputField.tsx","components/NewCommentForm/components/TextareaField/TextareaField.tsx","components/NewCommentForm/NewCommentForm.tsx","api/comments.ts","components/PostDetails/PostDetails.tsx","components/Button/Button.tsx","App.tsx","index.tsx"],"names":["Error","Notif","Loading","Loader","_jsx","className","children","defaultValue","post","id","userId","title","body","error","None","loading","comments","setLoading","setComments","setError","PostDetailsContext","createContext","currentUserId","UserSelectorContext","DropdownItem","_ref","name","selectUser","useContext","href","concat","classNames","onClick","DropdownMenu","users","role","map","_ref2","DropdownTrigger","userName","toggleDropdown","_jsxs","type","disabled","GetUsers","BASE_URL","wait","delay","Promise","resolve","setTimeout","request","url","method","arguments","length","undefined","data","options","JSON","stringify","headers","then","fetch","response","ok","json","client","getPostsFromServer","UserSelector","_users$find","handleUserSelect","_useState","useState","_useState2","_slicedToArray","setUsers","_useState3","_useState4","isOpen","setIsOpen","getUsers","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_context","prev","next","sent","t0","stop","apply","useEffect","handleDocumentClick","useCallback","event","trigger","target","closest","item","matches","document","addEventListener","removeEventListener","find","_ref3","Notification","_ref$type","text","dataCy","PostItem","currentPostId","getComments","Button","PostsList","posts","Message","comment","removeComment","email","Comments","isForm","setIsForm","_useContext","_Fragment","RemoveComment","Danger","_objectSpread","FieldError","hasIcon","hasError","InputFieldIcon","icon","InputField","value","placeholder","onChange","htmlFor","toLowerCase","e","TextareaField","labelText","NewCommentForm","fieldNames","setFieldNames","formData","setFormData","validateForm","form","Object","entries","forEach","oldNames","_toConsumableArray","values","some","handleSubmit","newComment","preventDefault","abrupt","AddComment","postId","oldComments","finish","oldData","_x","handleOnChange","_defineProperty","includes","filter","clearForm","onSubmit","PostDetails","GetComments","_ref$disabled","App","setPosts","_useState5","_useState6","setCurrentUserId","_useState7","_useState8","currentPost","setCurrentPost","_useState9","_useState10","_useState11","_useState12","getPosts","Posts","GetPosts","_callee2","_context2","_x2","userSelectorContextValue","useMemo","postDetailsContextValue","isPosts","Provider","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.e020da90.chunk.js","sourcesContent":["export enum Error {\n  None = '',\n  GetUsers = 'get users',\n  GetPosts = 'get posts',\n  GetComments = 'get comments',\n  RemoveComment = 'remove comments',\n  AddComment = 'add comments',\n}\n","export enum Notif {\n  Danger = 'danger',\n  Warning = 'warning',\n}\n","export enum Loading {\n  None,\n  Comments,\n  Posts,\n  AddComment,\n}\n","import './Loader.scss';\n\nexport const Loader = () => (\n  <div className=\"Loader\" data-cy=\"Loader\">\n    <div className=\"Loader__content\" />\n  </div>\n);\n","import { Dispatch, SetStateAction, createContext } from 'react';\nimport {\n  Loading,\n  Error,\n  Comment,\n  Post,\n} from '../types';\n\ninterface ContextType {\n  post: Post | null;\n  error: Error;\n  loading: Loading;\n  comments: Comment[];\n  setLoading: (loading: Loading) => void;\n  setComments: Dispatch<SetStateAction<Comment[]>>\n  setError: (error: Error) => void;\n}\n\nconst defaultValue = {\n  post: {\n    id: 0,\n    userId: 0,\n    title: '',\n    body: '',\n  },\n  error: Error.None,\n  loading: Loading.None,\n  comments: [],\n  setLoading: () => {},\n  setComments: () => {},\n  setError: () => {},\n};\n\nexport const PostDetailsContext = createContext<ContextType>(defaultValue);\n","import { createContext } from 'react';\nimport { Error } from '../types/Error';\n\ninterface ContextType {\n  currentUserId: number,\n  error: Error;\n}\n\nconst defaultValue = {\n  currentUserId: 0,\n  error: Error.None,\n};\n\nexport const UserSelectorContext = createContext<ContextType>(defaultValue);\n","import classNames from 'classnames';\nimport { FC, useContext } from 'react';\nimport { UserSelectorContext } from '../../context';\nimport { DropdownItemProps } from '../../types';\n\nexport const DropdownItem: FC<DropdownItemProps> = ({\n  id,\n  name,\n  selectUser,\n}) => {\n  const { currentUserId } = useContext(UserSelectorContext);\n\n  return (\n    <a\n      href={`#user-${id}`}\n      className={classNames('dropdown-item', {\n        'is-active': currentUserId === id,\n      })}\n      onClick={() => selectUser(id)}\n    >\n      {name}\n    </a>\n  );\n};\n","import { FC } from 'react';\nimport { DropdownItem } from './DropdownItem';\nimport { DropdownMenuProps } from '../../types';\n\nexport const DropdownMenu: FC<DropdownMenuProps> = ({\n  users,\n  selectUser,\n}) => (\n  <div\n    role=\"menu\"\n    id=\"dropdown-menu\"\n    className=\"dropdown-menu\"\n  >\n    <div className=\"dropdown-content\">\n      {users.map(({ id, name }) => (\n        <DropdownItem\n          key={id}\n          id={id}\n          name={name}\n          selectUser={selectUser}\n        />\n      ))}\n    </div>\n  </div>\n);\n","import { FC, useContext } from 'react';\nimport { Error, DropdownTriggerProps } from '../../types';\nimport { UserSelectorContext } from '../../context';\n\nexport const DropdownTrigger: FC<DropdownTriggerProps> = ({\n  userName,\n  toggleDropdown,\n}) => {\n  const { error } = useContext(UserSelectorContext);\n\n  return (\n    <div className=\"dropdown-trigger\">\n      <button\n        type=\"button\"\n        className=\"button\"\n        aria-haspopup=\"true\"\n        aria-controls=\"dropdown-menu\"\n        onClick={toggleDropdown}\n        disabled={error === Error.GetUsers}\n      >\n        <span>{userName || 'Choose a user'}</span>\n\n        <span className=\"icon is-small\">\n          <i className=\"fas fa-angle-down\" aria-hidden=\"true\" />\n        </span>\n      </button>\n    </div>\n  );\n};\n","const BASE_URL = 'https://mate.academy/students-api';\n\n// a promise resolved after a given delay\nfunction wait(delay: number) {\n  return new Promise(resolve => {\n    setTimeout(resolve, delay);\n  });\n}\n\n// To have autocompletion and avoid mistypes\ntype RequestMethod = 'GET' | 'POST' | 'PATCH' | 'DELETE';\n\nfunction request<T>(\n  url: string,\n  method: RequestMethod = 'GET',\n  data: any = null, // we can send any data to the server\n): Promise<T> {\n  const options: RequestInit = { method };\n\n  if (data) {\n    // We add body and Content-Type only for the requests with data\n    options.body = JSON.stringify(data);\n    options.headers = {\n      'Content-Type': 'application/json; charset=UTF-8',\n    };\n  }\n\n  // for a demo purpose we emulate a delay to see if Loaders work\n  return wait(300)\n    .then(() => fetch(BASE_URL + url, options))\n    .then(response => {\n      if (!response.ok) {\n        throw new Error();\n      }\n\n      return response.json();\n    });\n}\n\nexport const client = {\n  get: <T>(url: string) => request<T>(url),\n  post: <T>(url: string, data: unknown) => request<T>(url, 'POST', data),\n  patch: <T>(url: string, data: any) => request<T>(url, 'PATCH', data),\n  delete: (url: string) => request(url, 'DELETE'),\n};\n","import { Post } from '../types/index';\nimport { client } from '../utils/fetchClient';\n\nexport const getPostsFromServer = (userId: number) => {\n  return client.get<Post[]>(`/posts?userId=${userId}`);\n};\n","import { useState, useEffect, useCallback } from 'react';\nimport classNames from 'classnames';\nimport { DropdownMenu } from './DropdownMenu';\nimport { DropdownTrigger } from './DropdownTrigger';\nimport {\n  User,\n  Error,\n  UserSelectorProps,\n} from '../../types';\nimport { getUsersFromServer } from '../../api';\n\nexport const UserSelector: React.FC<UserSelectorProps> = ({\n  currentUserId,\n  setError,\n  handleUserSelect,\n}) => {\n  const [users, setUsers] = useState<User[]>([]);\n  const [isOpen, setIsOpen] = useState(false);\n\n  const getUsers = async () => {\n    try {\n      const data = await getUsersFromServer();\n\n      setUsers(data);\n    } catch {\n      setError(Error.GetUsers);\n    }\n  };\n\n  useEffect(() => {\n    getUsers();\n  }, []);\n\n  const handleDocumentClick = useCallback(event => {\n    const trigger = event.target.closest('.dropdown-trigger');\n    const item = event.target.matches('.dropdown-item');\n\n    if (!isOpen) {\n      return;\n    }\n\n    if (trigger || item) {\n      return;\n    }\n\n    setIsOpen(false);\n  }, [isOpen]);\n\n  useEffect(() => {\n    document.addEventListener('click', handleDocumentClick);\n\n    return () => {\n      document.removeEventListener('click', handleDocumentClick);\n    };\n  }, [isOpen]);\n\n  const selectUser = (userId: number) => {\n    handleUserSelect(userId);\n    setIsOpen(false);\n  };\n\n  const toggleDropdown = () => {\n    setIsOpen(prev => !prev);\n  };\n\n  const userName = users.find(({ id }) => id === currentUserId)?.name;\n\n  return (\n    <div\n      data-cy=\"UserSelector\"\n      className={classNames('dropdown', { 'is-active': isOpen })}\n    >\n\n      <DropdownTrigger\n        userName={userName || ''}\n        toggleDropdown={toggleDropdown}\n      />\n\n      <DropdownMenu\n        users={users}\n        selectUser={selectUser}\n      />\n    </div>\n  );\n};\n","import { User } from '../types/User';\nimport { client } from '../utils/fetchClient';\n\nexport const getUsersFromServer = () => {\n  return client.get<User[]>('/users');\n};\n","import { FC } from 'react';\nimport { NotificationProps } from '../../types';\n\nexport const Notification: FC<NotificationProps> = ({\n  type = 'warning',\n  text,\n  dataCy,\n}) => (\n  <div\n    className={`notification is-${type}`}\n    data-cy={dataCy}\n  >\n    {text}\n  </div>\n);\n","import { FC } from 'react';\nimport classNames from 'classnames';\nimport { Button } from '../../../index';\nimport { PostItemProps } from '../../../../types';\n\nexport const PostItem: FC<PostItemProps> = ({\n  post,\n  currentPostId,\n  getComments,\n}) => (\n  <tr data-cy=\"Post\">\n    <td data-cy=\"PostId\">{post.id}</td>\n\n    <td data-cy=\"PostTitle\">\n      {post.title}\n    </td>\n\n    <td className=\"has-text-right is-vcentered\">\n      <Button\n        type=\"button\"\n        dataCy=\"PostButton\"\n        className={classNames({ 'is-light': currentPostId !== post.id })}\n        onClick={() => getComments(post)}\n      >\n        {currentPostId !== post.id ? 'Open' : 'Close'}\n      </Button>\n    </td>\n  </tr>\n);\n","import { PostItem } from './components/PostItem';\nimport { PostsListProps } from '../../types';\n\nexport const PostsList: React.FC<PostsListProps> = ({\n  posts,\n  currentPostId,\n  getComments,\n}) => (\n  <div data-cy=\"PostsList\">\n    <p className=\"title\">Posts:</p>\n\n    <table className=\"table is-fullwidth is-striped is-hoverable is-narrow\">\n      <thead>\n        <tr className=\"has-background-link-light\">\n          <th>#</th>\n          <th>Title</th>\n          <th> </th>\n        </tr>\n      </thead>\n\n      <tbody>\n        {posts.map(post => (\n          <PostItem\n            post={post}\n            key={post.id}\n            currentPostId={currentPostId}\n            getComments={getComments}\n          />\n        ))}\n      </tbody>\n    </table>\n  </div>\n);\n","import { MessageProps } from '../../../../types';\n\nexport const Message: React.FC<MessageProps> = ({\n  comment,\n  removeComment,\n}) => (\n  <article className=\"message is-small\" data-cy=\"Comment\">\n    <div className=\"message-header\">\n      <a\n        href={`mailto:${comment.email}`}\n        data-cy=\"CommentAuthor\"\n      >\n        {comment.name}\n      </a>\n      <button\n        type=\"button\"\n        data-cy=\"CommentDelete\"\n        aria-label=\"delete\"\n        className=\"delete is-small\"\n        onClick={() => removeComment(comment.id)}\n      />\n    </div>\n\n    <div className=\"message-body\" data-cy=\"CommentBody\">\n      {comment.body}\n    </div>\n  </article>\n);\n","import { FC, useContext, useEffect } from 'react';\nimport { Message } from '../Message';\nimport { Notif, Error, CommentsProps } from '../../../../types';\nimport { Button, Notification } from '../../../index';\nimport { PostDetailsContext } from '../../../../context';\n\nexport const Comments: FC<CommentsProps> = ({\n  isForm,\n  setIsForm,\n  removeComment,\n}) => {\n  const { error, comments } = useContext(PostDetailsContext);\n\n  useEffect(() => () => setIsForm(false), []);\n\n  const showForm = () => setIsForm(true);\n\n  return (\n    <>\n      {!comments.length ? (\n        <p className=\"title is-4\" data-cy=\"NoCommentsMessage\">\n          No comments yet\n        </p>\n      ) : (\n        <>\n          <p className=\"title is-4\">Comments:</p>\n\n          {error === Error.RemoveComment && (\n            <Notification type={Notif.Danger} text=\"Something went wrong!\" />\n          )}\n\n          {comments.map(comment => (\n            <Message\n              key={comment.id}\n              comment={{ ...comment }}\n              removeComment={removeComment}\n            />\n          ))}\n        </>\n      )}\n\n      {!isForm && (\n        <Button dataCy=\"WriteCommentButton\" onClick={showForm}>\n          Write a comment\n        </Button>\n      )}\n    </>\n  );\n};\n","import { FieldErrorProps } from '../../../../types';\n\nexport const FieldError: React.FC<FieldErrorProps> = ({\n  name,\n  hasIcon,\n  hasError,\n}) => {\n  if (!hasError) {\n    return null;\n  }\n\n  return (\n    <>\n      {hasIcon && (\n        <span\n          className=\"icon is-small is-right has-text-danger\"\n          data-cy=\"ErrorIcon\"\n        >\n          <i className=\"fas fa-exclamation-triangle\" />\n        </span>\n      )}\n      <p className=\"help is-danger\" data-cy=\"ErrorMessage\">\n        {name === 'Body' ? 'Enter some text' : `${name} is required`}\n      </p>\n    </>\n  );\n};\n","import { FC } from 'react';\nimport { InputFieldIconProps } from '../../../../../../types';\n\nexport const InputFieldIcon: FC<InputFieldIconProps> = ({ icon }) => (\n  <span className=\"icon is-small is-left\">\n    <i className={`fas fa-${icon}`} />\n  </span>\n);\n","import classNames from 'classnames';\nimport { FieldError } from '../FieldError';\nimport { InputFieldIcon } from './components/InputFieldIcon';\nimport { InputFieldProps } from '../../../../types';\n\nexport const InputField: React.FC<InputFieldProps> = ({\n  id,\n  icon,\n  name,\n  value,\n  hasError,\n  placeholder,\n  onChange,\n}) => (\n  <div className=\"field\" data-cy={`${name}Field`}>\n    <label className=\"label\" htmlFor={id}>\n      {`Author ${name}`}\n    </label>\n\n    <div className=\"control has-icons-left has-icons-right\">\n      <input\n        type=\"text\"\n        name={name.toLowerCase()}\n        id={id}\n        value={value}\n        placeholder={placeholder}\n        className={classNames('input', { 'is-danger': hasError })}\n        onChange={(e) => onChange(name.toLowerCase(), e.target.value)}\n      />\n\n      <InputFieldIcon icon={icon} />\n\n      <FieldError\n        hasIcon\n        name={name}\n        hasError={hasError}\n      />\n    </div>\n  </div>\n);\n","import classNames from 'classnames';\nimport { FieldError } from '../FieldError';\nimport { TextareaFieldProps } from '../../../../types';\n\nexport const TextareaField: React.FC<TextareaFieldProps> = ({\n  id,\n  name,\n  value,\n  hasError,\n  labelText,\n  placeholder,\n  onChange,\n}) => (\n  <div className=\"field\" data-cy={`${name}Field`}>\n    <label className=\"label\" htmlFor={id}>\n      {labelText}\n    </label>\n\n    <div className=\"control\">\n      <textarea\n        id={id}\n        value={value}\n        name={name.toLowerCase()}\n        placeholder={placeholder}\n        className={classNames('textarea', { 'is-danger': hasError })}\n        onChange={(e) => onChange(name.toLowerCase(), e.target.value)}\n      />\n    </div>\n\n    <FieldError name={name} hasError={hasError} />\n  </div>\n);\n","import { useCallback, useContext, useState } from 'react';\nimport { InputField, TextareaField } from './components';\nimport { Button } from '../index';\nimport {\n  Error,\n  Loading,\n  FormSubmit,\n  CommentData,\n} from '../../types';\nimport { addCommentOnServer } from '../../api';\nimport { PostDetailsContext } from '../../context';\n\nexport const NewCommentForm: React.FC = () => {\n  const [fieldNames, setFieldNames] = useState<string[]>([]);\n  const [formData, setFormData] = useState({ name: '', email: '', body: '' });\n  const {\n    post,\n    loading,\n    setError,\n    setLoading,\n    setComments,\n  } = useContext(PostDetailsContext);\n\n  const validateForm = useCallback((form: CommentData) => {\n    Object.entries(form).forEach((item) => {\n      if (!item[1]) {\n        setFieldNames((oldNames) => [...oldNames, item[0]]);\n      }\n    });\n\n    const values = Object.values(form);\n\n    return values.some(value => !value.length);\n  }, [fieldNames]);\n\n  const handleSubmit = useCallback(async (e: FormSubmit) => {\n    e.preventDefault();\n\n    const isValid = validateForm(formData);\n\n    if (isValid) {\n      return;\n    }\n\n    setLoading(Loading.AddComment);\n\n    try {\n      const newComment = await addCommentOnServer(\n        { ...formData, postId: post?.id || 0 },\n      );\n\n      setComments(oldComments => [...oldComments, newComment]);\n    } catch {\n      setError(Error.AddComment);\n    } finally {\n      setLoading(Loading.None);\n    }\n\n    setFormData(oldData => Object({ ...oldData, body: '' }));\n  }, [fieldNames, formData]);\n\n  const handleOnChange = (name: string, value: string) => {\n    setFormData(oldData => Object({ ...oldData, [name]: value }));\n\n    const isError = fieldNames.includes(name);\n\n    if (!isError) {\n      return;\n    }\n\n    setFieldNames(oldNames => oldNames.filter(item => item !== name));\n  };\n\n  const clearForm = useCallback(() => {\n    setFormData({ name: '', email: '', body: '' });\n    setFieldNames([]);\n  }, [formData]);\n\n  return (\n    <form data-cy=\"NewCommentForm\" onSubmit={handleSubmit}>\n      <InputField\n        id=\"comment-author-name\"\n        name=\"Name\"\n        icon=\"user\"\n        value={formData.name}\n        placeholder=\"Name Surname\"\n        hasError={fieldNames.includes('name')}\n        onChange={handleOnChange}\n      />\n\n      <InputField\n        id=\"comment-author-email\"\n        name=\"Email\"\n        icon=\"envelope\"\n        value={formData.email}\n        placeholder=\"email@test.com\"\n        hasError={fieldNames.includes('email')}\n        onChange={handleOnChange}\n      />\n\n      <TextareaField\n        id=\"comment-body\"\n        name=\"Body\"\n        value={formData.body}\n        labelText=\"Enter some text\"\n        placeholder=\"Type comment here\"\n        hasError={fieldNames.includes('body')}\n        onChange={handleOnChange}\n      />\n\n      <div className=\"field is-grouped\">\n        <div className=\"control\">\n\n          <Button\n            type=\"submit\"\n            loading={loading === Loading.AddComment}\n          >\n            Add\n          </Button>\n        </div>\n\n        <div className=\"control\">\n          <Button\n            type=\"reset\"\n            className=\"is-light\"\n            onClick={clearForm}\n          >\n            Clear\n          </Button>\n        </div>\n      </div>\n    </form>\n  );\n};\n","import { client } from '../utils/fetchClient';\nimport { Comment } from '../types/index';\n\nexport const getCommentsFromServer = (postId: number) => {\n  return client.get<Comment[]>(`/comments?postId=${postId}`);\n};\n\nexport const removeCommentOnServer = (commentId: number) => {\n  return client.delete(`/comments/${commentId}`);\n};\n\nexport const addCommentOnServer = (\n  data: Omit<Comment, 'id'>,\n):Promise<Comment> => {\n  return client.post('/comments', data);\n};\n","import { useContext, useState } from 'react';\nimport { Notif, Error, Loading } from '../../types';\nimport { Comments } from './components/Comments';\nimport { Loader, Notification } from '../index';\nimport { removeCommentOnServer } from '../../api';\nimport { NewCommentForm } from '../NewCommentForm';\nimport { PostDetailsContext } from '../../context';\n\nexport const PostDetails: React.FC = () => {\n  const {\n    post,\n    error,\n    loading,\n    setComments,\n    setError,\n  } = useContext(PostDetailsContext);\n\n  const [isForm, setIsForm] = useState(false);\n\n  const removeComment = async (id: number) => {\n    setComments((oldComments) => {\n      return oldComments.filter(comment => comment.id !== id);\n    });\n\n    try {\n      await removeCommentOnServer(id);\n    } catch {\n      setError(Error.RemoveComment);\n    }\n  };\n\n  return (\n    <div className=\"content\" data-cy=\"PostDetails\">\n      <div className=\"block\">\n        <h2 data-cy=\"PostTitle\">\n          {`#${post?.id}: ${post?.title}`}\n        </h2>\n\n        <p data-cy=\"PostBody\">\n          {post?.body}\n        </p>\n      </div>\n\n      <div className=\"block\">\n        {loading === Loading.Comments ? (\n          <Loader />\n        ) : (\n          <>\n            {error === Error.GetComments ? (\n              <Notification\n                type={Notif.Danger}\n                dataCy=\"CommentsError\"\n                text=\"Something went wrong\"\n              />\n            ) : (\n              <Comments\n                isForm={isForm}\n                setIsForm={setIsForm}\n                removeComment={removeComment}\n              />\n            )}\n          </>\n        )}\n      </div>\n\n      {(isForm && post) && <NewCommentForm />}\n    </div>\n  );\n};\n","import classNames from 'classnames';\nimport { ButtonProps } from '../../types';\n\nexport const Button: React.FC<ButtonProps> = ({\n  type = 'button',\n  loading,\n  dataCy,\n  className,\n  disabled = false,\n  children,\n  onClick,\n}) => (\n  <button\n    // eslint-disable-next-line react/button-has-type\n    type={type}\n    data-cy={dataCy}\n    className={classNames(\n      'button is-link',\n      className,\n      { 'is-loading': loading },\n    )}\n    onClick={onClick}\n    disabled={disabled}\n  >\n    {children}\n  </button>\n);\n","import React, { useCallback, useMemo, useState } from 'react';\nimport 'bulma/bulma.sass';\nimport '@fortawesome/fontawesome-free/css/all.css';\nimport './App.scss';\nimport classNames from 'classnames';\n\nimport {\n  Loader,\n  PostsList,\n  PostDetails,\n  UserSelector,\n  Notification,\n} from './components';\n\nimport {\n  Post,\n  Notif,\n  Error,\n  Loading,\n  Comment,\n} from './types';\nimport { UserSelectorContext, PostDetailsContext } from './context';\nimport { getCommentsFromServer, getPostsFromServer } from './api';\n\nexport const App: React.FC = () => {\n  const [posts, setPosts] = useState<Post[]>([]);\n  const [comments, setComments] = useState<Comment[]>([]);\n  const [currentUserId, setCurrentUserId] = useState(0);\n  const [currentPost, setCurrentPost] = useState<Post | null>(null);\n  const [error, setError] = useState(Error.None);\n  const [loading, setLoading] = useState(Loading.None);\n\n  const getPosts = async (userId: number) => {\n    setLoading(Loading.Posts);\n    setError(Error.None);\n    setCurrentPost(null);\n\n    try {\n      const data = await getPostsFromServer(userId);\n\n      setPosts(data);\n    } catch {\n      setError(Error.GetPosts);\n    } finally {\n      setLoading(Loading.None);\n    }\n  };\n\n  const getComments = useCallback(async (post: Post) => {\n    if (currentPost?.id === post.id) {\n      setCurrentPost(null);\n\n      return;\n    }\n\n    setLoading(Loading.Comments);\n    setCurrentPost(post);\n\n    try {\n      const data = await getCommentsFromServer(post.id);\n\n      setComments(data);\n    } catch {\n      setError(Error.GetComments);\n    } finally {\n      setLoading(Loading.None);\n    }\n  }, [error, loading, currentPost, comments]);\n\n  const handleUserSelect = useCallback((userId: number) => {\n    setCurrentUserId(userId);\n    getPosts(userId);\n  }, [currentUserId]);\n\n  const userSelectorContextValue = useMemo(() => Object({\n    error, currentUserId,\n  }), [error, currentUserId]);\n\n  const postDetailsContextValue = useMemo(() => Object({\n    post: currentPost,\n    error,\n    loading,\n    comments,\n    setLoading,\n    setComments,\n    setError,\n  }), [currentPost, error, loading, comments]);\n\n  const isPosts = useMemo(\n    () => !posts.length && !!currentUserId && !loading && !error,\n    [posts, currentUserId, loading],\n  );\n\n  return (\n    <main className=\"section\" aria-hidden=\"true\">\n      <div className=\"container\">\n        <div className=\"tile is-ancestor\">\n          <div className=\"tile is-parent\">\n            <div className=\"tile is-child box is-success\">\n              <div className=\"block\">\n                <UserSelectorContext.Provider value={userSelectorContextValue}>\n                  <UserSelector\n                    currentUserId={currentUserId}\n                    setError={setError}\n                    handleUserSelect={handleUserSelect}\n                  />\n                </UserSelectorContext.Provider>\n              </div>\n\n              <div className=\"block\" data-cy=\"MainContent\">\n                {!currentUserId && error !== Error.GetUsers && (\n                  <p data-cy=\"NoSelectedUser\">No user selected</p>\n                )}\n\n                {loading === Loading.Posts && <Loader />}\n\n                {error === Error.GetPosts && (\n                  <Notification\n                    type={Notif.Danger}\n                    dataCy=\"PostsLoadingError\"\n                    text=\"Something went wrong!\"\n                  />\n                )}\n\n                {isPosts && (\n                  <Notification dataCy=\"NoPostsYet\" text=\"No posts yet\" />\n                )}\n\n                {posts.length > 0 && loading !== Loading.Posts && (\n                  <PostsList\n                    currentPostId={currentPost?.id || 0}\n                    posts={posts}\n                    getComments={getComments}\n                  />\n                )}\n              </div>\n            </div>\n          </div>\n\n          <div\n            data-cy=\"Sidebar\"\n            className={classNames(\n              'tile',\n              'is-parent',\n              'is-8-desktop',\n              'Sidebar',\n              { 'Sidebar--open': !!currentPost },\n            )}\n          >\n            <div className=\"tile is-child box is-success \">\n              {!!currentPost && (\n                <PostDetailsContext.Provider value={postDetailsContextValue}>\n                  <PostDetails />\n                </PostDetailsContext.Provider>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </main>\n  );\n};\n","import ReactDOM from 'react-dom';\n\nimport { App } from './App';\n\nReactDOM.render(\n  <App />,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}